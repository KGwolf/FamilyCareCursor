# 家庭照护助手数据结构与功能完善方案

## 一、数据结构设计

### 1. 创建数据管理模块 (`utils/data-manager.js`)
- 用户信息
- 家人信息
- 提醒/任务
- 健康记录（体重、症状）
- 设置配置

### 2. 数据存储结构
```javascript
const STORAGE_KEYS = {
  USER_INFO: 'userInfo',
  FAMILY_MEMBERS: 'familyMembers',
  REMINDERS: 'reminders',
  HEALTH_RECORDS: 'healthRecords',
  SETTINGS: 'settings'
}
```

## 二、各页面功能完善

### 1. 入口页 (index)
- 检查是否已添加家人
- 无家人：显示index.wxml引导页
- 有家人：自动跳转到home.wxml首页
- 添加家人后自动跳转到首页

### 2. 首页 (home)
- 实现患者切换逻辑
- 加载今日任务数据
- 实现任务完成状态更新
- 健康趋势Tab跳转到records页面
- 病历管理Tab跳转到records页面

### 3. 日程 (calendar)
- 动态加载日历任务数据
- 实现日期选择后的任务加载
- 家人切换功能完善
- 任务完成状态同步

### 4. 添加提醒 (addReminder)
- 完善提醒数据保存
- 关联到指定家人
- 支持自定义频率设置

### 5. 添加家人 (addFamily)
- 已有基础实现，优化数据结构
- 保存后跳转到首页

### 6. 档案 (records)
- 动态加载健康记录数据
- 家人切换后刷新数据
- 图表数据动态生成

### 7. 添加记录 (addRecord)
- 体重记录保存
- 症状记录保存
- 关联到当前家人

### 8. 设置 (settings)
- 加载用户信息
- 家人管理功能
- 设置项保存

## 三、全局功能

### 1. app.js
- 全局数据初始化
- 当前选中家人状态管理

### 2. 工具函数
- 数据持久化封装
- 日期时间处理
- 数据验证

## 实施步骤
1. 创建数据管理工具类
2. 完善app.js全局状态
3. 实现index页面的家人检测逻辑
4. 逐个页面实现数据加载和保存逻辑
5. 实现页面间数据同步
6. 测试完整功能流程